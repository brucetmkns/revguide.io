/* ============================================
   Plays Page Styles
   ============================================ */

/* ----------------------------------------
   Play Editor Layout
   ---------------------------------------- */
.play-editor-layout {
  max-width: 800px;
  margin: 0 auto;
}

.play-editor-card {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  display: flex;
  flex-direction: column;
  min-height: 500px;
}


/* ----------------------------------------
   Play Card Tabs
   ---------------------------------------- */
.play-card-tabs {
  display: flex;
  gap: 0;
  padding: 0 var(--space-5);
  border-bottom: 1px solid var(--color-border);
  background: var(--color-bg-subtle);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.play-tab {
  padding: var(--space-3) var(--space-4);
  border: none;
  background: transparent;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  cursor: pointer;
  position: relative;
  transition: color var(--transition-fast);
}

.play-tab:hover:not(.disabled) {
  color: var(--color-text-primary);
}

.play-tab.active {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-semibold);
}

.play-tab.active::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--color-primary);
}



/* ----------------------------------------
   Play Card Body & Tab Panels
   ---------------------------------------- */
.play-card-body {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.play-tab-panel {
  flex: 1;
  padding: var(--space-5);
  display: flex;
  flex-direction: column;
}

.play-tab-panel[hidden] {
  display: none;
}

.play-content-form,
.play-rules-form {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}


/* ----------------------------------------
   Play Card Footer
   ---------------------------------------- */
.play-card-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-5);
  border-top: 1px solid var(--color-border);
  background: var(--color-bg-subtle);
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}


/* ----------------------------------------
   Usage Coming Soon State
   ---------------------------------------- */
.play-usage-coming-soon {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: var(--space-12);
  color: var(--color-text-muted);
  flex: 1;
}

.play-usage-coming-soon .icon {
  margin-bottom: var(--space-4);
  opacity: 0.4;
}

.play-usage-coming-soon h3 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-secondary);
  margin: 0 0 var(--space-2);
}

.play-usage-coming-soon p {
  font-size: var(--font-size-sm);
  margin: 0;
}


/* ----------------------------------------
   Card Icon Colors by Type
   ---------------------------------------- */
.card-icon.competitor {
  background: var(--color-danger-bg);
  color: var(--color-danger);
}

.card-icon.objection {
  background: var(--color-warning-bg);
  color: var(--color-warning);
}

.card-icon.tip {
  background: var(--color-success-bg);
  color: var(--color-success);
}

.card-icon.process {
  background: var(--color-info-bg);
  color: var(--color-info);
}


/* ----------------------------------------
   Sections Builder
   ---------------------------------------- */
.sections-builder {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  margin-top: var(--space-4);
}

.section-wrapper {
  display: flex;
  flex-direction: column;
}

.section-row {
  background: var(--color-bg-subtle);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  cursor: default;
  transition: box-shadow var(--transition-fast), border-color var(--transition-fast);
}

.section-row[draggable="true"] {
  cursor: grab;
}

.section-row[draggable="true"]:active {
  cursor: grabbing;
}

.section-wrapper.dragging .section-row {
  opacity: 0.5;
  border-color: var(--color-primary);
}

.section-wrapper.drag-over .section-row {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px var(--color-primary-subtle);
}

.section-header-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin-bottom: var(--space-3);
}

.drag-handle {
  cursor: grab;
  color: var(--color-text-muted);
  padding: var(--space-1);
  flex-shrink: 0;
}

.drag-handle:hover {
  color: var(--color-text-secondary);
}

.drag-handle:active {
  cursor: grabbing;
}

/* Section Type Toggle */
.section-type-toggle {
  display: flex;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  overflow: hidden;
  flex-shrink: 0;
}

.section-type-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 28px;
  border: none;
  background: var(--color-bg-primary);
  color: var(--color-text-muted);
  cursor: pointer;
  transition: background var(--transition-fast), color var(--transition-fast);
}

.section-type-btn:first-child {
  border-right: 1px solid var(--color-border);
}

.section-type-btn:hover {
  background: var(--color-bg-subtle);
  color: var(--color-text-secondary);
}

.section-type-btn.active {
  background: var(--color-primary-subtle);
  color: var(--color-text-primary);
}

.section-header-row .section-title {
  flex: 1;
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
}

/* Insert Button Between Sections */
.section-insert-btn {
  align-self: center;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  margin: var(--space-1) 0;
  border: 1px dashed var(--color-border);
  border-radius: 50%;
  background: var(--color-bg-primary);
  color: var(--color-text-muted);
  cursor: pointer;
  opacity: 0;
  transition: opacity var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast);
}

.sections-builder:hover .section-insert-btn,
.section-insert-btn:focus {
  opacity: 1;
}

.section-insert-btn:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background: var(--color-primary-subtle);
}

.section-insert-btn:focus {
  outline: none;
  border-color: var(--color-primary);
}

/* Section Body */
.section-body {
  margin-top: 0;
}

.section-content {
  width: 100%;
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-family: inherit;
  resize: vertical;
  min-height: 80px;
}

/* Media Section */
.section-media-field {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.section-media-url {
  width: 100%;
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
}

.section-media-url:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px var(--color-primary-subtle);
}

.remove-section-btn {
  flex-shrink: 0;
}


/* ----------------------------------------
   Empty Sections State
   ---------------------------------------- */
.sections-builder:empty::after {
  content: 'No sections added. Click "Add Section" to create one.';
  display: block;
  padding: var(--space-6);
  text-align: center;
  color: var(--color-text-muted);
  font-size: var(--font-size-sm);
  background: var(--color-bg-muted);
  border-radius: var(--radius-md);
  border: 1px dashed var(--color-border);
}


/* ----------------------------------------
   Fields Section Builder
   ---------------------------------------- */
.section-fields-builder {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.fields-warning {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3);
  background: var(--color-warning-bg);
  border: 1px solid var(--color-warning);
  border-radius: var(--radius-md);
  color: var(--color-warning);
  font-size: var(--font-size-sm);
}

.fields-warning svg {
  flex-shrink: 0;
}

.fields-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.field-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
}

.field-row .searchable-select {
  flex: 1;
  min-width: 200px;
}

.field-required-label {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  white-space: nowrap;
  cursor: pointer;
}

.field-required-checkbox {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.section-fields-builder .add-field-btn {
  align-self: flex-start;
}

.section-fields-builder .form-hint {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
}

/* ----------------------------------------
   Variables Hint
   ---------------------------------------- */
.section-variables-hint {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
  background: var(--color-bg-subtle);
  border-radius: var(--radius-sm);
  margin-top: var(--space-2);
}

.section-variables-hint .hint-icon {
  display: flex;
  align-items: center;
  color: var(--color-text-muted);
  flex-shrink: 0;
}

.section-variables-hint code {
  background: var(--color-bg-secondary);
  padding: 1px 4px;
  border-radius: 3px;
  font-family: var(--font-family-mono);
  font-size: 11px;
  color: var(--color-text-secondary);
}


/* ----------------------------------------
   Content Assets (Recommended Content Type)
   ---------------------------------------- */
.content-assets-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.content-asset-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3);
  background: var(--color-bg-subtle);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  cursor: grab;
  transition: all var(--transition-fast);
}

.content-asset-row:hover {
  border-color: var(--color-border-strong);
}

.content-asset-row.dragging {
  opacity: 0.5;
  cursor: grabbing;
}

.content-asset-row.drag-over {
  border-color: var(--color-primary);
  background: var(--color-bg-primary);
}

.content-asset-type-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.content-asset-type-icon svg {
  width: 16px;
  height: 16px;
}

.content-asset-info {
  flex: 1;
  min-width: 0;
}

.content-asset-title {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.content-asset-url {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-top: 2px;
}

.content-assets-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-4);
  text-align: center;
  color: var(--color-text-muted);
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-bg-subtle);
}

.content-assets-empty .empty-icon {
  color: var(--color-text-tertiary);
  margin-bottom: var(--space-3);
}

.content-assets-empty p {
  margin: 0;
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

/* ----------------------------------------
   Asset Picker Modal
   ---------------------------------------- */
#assetPickerModal {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 1000;
}

#assetPickerModal.open {
  display: flex;
  align-items: center;
  justify-content: center;
}

#assetPickerModal .modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
}

#assetPickerModal .modal-dialog {
  position: relative;
  width: 90%;
  max-width: 700px;
  max-height: 80vh;
  background: var(--color-bg-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  display: flex;
  flex-direction: column;
}

#assetPickerModal .modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-4) var(--space-5);
  border-bottom: 1px solid var(--color-border);
}

#assetPickerModal .modal-header h3 {
  margin: 0;
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
}

#assetPickerModal .modal-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  font-size: 24px;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
}

#assetPickerModal .modal-close:hover {
  background: var(--color-bg-subtle);
  color: var(--color-text-primary);
}

#assetPickerModal .modal-body {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-4) var(--space-5);
}

#assetPickerModal .modal-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-5);
  border-top: 1px solid var(--color-border);
}

.asset-picker-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--space-3);
}

.asset-picker-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-3);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
}

.asset-picker-item:hover {
  border-color: var(--color-border-strong);
  background: var(--color-bg-subtle);
}

.asset-picker-item.selected {
  border-color: var(--color-primary);
  background: rgba(178, 239, 99, 0.1);
}

.asset-picker-checkbox {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid var(--color-border-strong);
  border-radius: var(--radius-sm);
  flex-shrink: 0;
  transition: all var(--transition-fast);
}

.asset-picker-checkbox svg {
  opacity: 0;
  color: white;
}

.asset-picker-item.selected .asset-picker-checkbox {
  background: var(--color-primary);
  border-color: var(--color-primary);
}

.asset-picker-item.selected .asset-picker-checkbox svg {
  opacity: 1;
}

.asset-picker-content {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  flex: 1;
  min-width: 0;
}

.asset-picker-type-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.asset-picker-type-icon svg {
  width: 16px;
  height: 16px;
}

.asset-picker-info {
  flex: 1;
  min-width: 0;
}

.asset-picker-title {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.asset-picker-description {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
  margin-top: 2px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.asset-picker-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-4);
  text-align: center;
  color: var(--color-text-muted);
}

.asset-picker-empty p {
  margin: 0;
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

/* Compact card icon for recommended_content type */
.compact-card-icon.recommended_content {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
}
